<?xml version="1.0" encoding="utf-8"?>
<!--GoogleVRHMD plugin additions-->
<root xmlns:android="http://schemas.android.com/apk/res/android">
	<!-- init section is always evaluated once per architecture -->
	<init>
		<log text="GoogleVRHMD init" />
	
	</init>

	<!-- optional files or directories to copy to Intermediate/Android/APK -->
	<resourceCopies>
    <log text="Copying xrapp-release.aar"/>
    <copyFile src="$S(PluginDir)/SVRPlugin/ExtLibs/xrapp-release.aar"
							dst="$S(BuildDir)/libs/xrapp-release.aar" />
		<log text="Copying svrsdk-release.aar"/>
		<copyFile src="$S(PluginDir)/SVRPlugin/ExtLibs/svrsdk-release.aar"
								dst="$S(BuildDir)/libs/svrsdk-release.aar" />
		<log text="Copying OvrPlugin runtime files to staging" />
		<isArch arch="armeabi-v7a">
      <log text="Copying libvrapi.so"/>
			<copyFile src="$S(PluginDir)/SVRPlugin/ExtLibs/armeabi-v7a/libvrapi.so"
						dst="$S(BuildDir)/libs/armeabi-v7a/libvrapi.so" />
      <!--<log text="Copying libxrapi.so"/>
      <copyFile src="$S(PluginDir)/SVRPlugin/ExtLibs/armeabi-v7a/libxrapi.so"
						dst="$S(BuildDir)/libs/armeabi-v7a/libxrapi.so" />
      <log text="Copying libxrcore.so"/>
      <copyFile src="$S(PluginDir)/SVRPlugin/ExtLibs/armeabi-v7a/libxrcore.so"
						dst="$S(BuildDir)/libs/armeabi-v7a/libxrcore.so" />-->
      <log text="Copying libOVRPlugin.so"/>
      <copyFile src="$S(PluginDir)/SVRPlugin/Lib/armeabi-v7a/libOVRPlugin.so"
            			dst="$S(BuildDir)/libs/armeabi-v7a/libOVRPlugin.so" />
		</isArch>
		<isArch arch="arm64-v8a">
      <log text="Copying libvrapi.so"/>
      <copyFile src="$S(PluginDir)/SVRPlugin/ExtLibs/arm64-v8a/libvrapi.so"
						dst="$S(BuildDir)/libs/arm64-v8a/libvrapi.so" />

      <log text="Copying libOVRPlugin.so"/>
      <copyFile src="$S(PluginDir)/SVRPlugin/Lib/arm64-v8a/libOVRPlugin.so"
            			dst="$S(BuildDir)/libs/arm64-v8a/libOVRPlugin.so" />
		</isArch>
	</resourceCopies>
  <gameActivityImportAdditions>
    <insert>
		import com.ssnwt.xrapp.XrApp;
		import com.ssnwt.svrsdk.MainActivity;
	</insert>
  </gameActivityImportAdditions>
	<gameActivitySuperClass>
		<insert>
			MainActivity
		</insert>
	</gameActivitySuperClass>
  <gameActivityOnCreateAdditions>
    <insert>
      XrApp.createInstance(this);
    </insert>
  </gameActivityOnCreateAdditions>
	<!-- Files to copy before the build so they can be used in the build -->

	<!-- optional additions to proguard -->
	<!-- optional libraries to load in GameActivity.java before libUE4.so -->
	<soLoadLibrary>
    <loadLibrary name="vrapi" failmsg="vrapi library not loaded and required!" />
    <loadLibrary name="xrapi" failmsg="xrapi library not loaded and required!" />
    <loadLibrary name="xrcore" failmsg="xrcore library not loaded and required!" />
    <loadLibrary name="OVRPlugin" failmsg="OVRPlugin library not loaded and required!" />
	</soLoadLibrary>
  <buildGradleAdditions>
    <insert>
		dependencies {
		implementation files('src/main/libs/xrapp-release.aar')
		implementation files('src/main/libs/svrsdk-release.aar')
		}
	</insert>
  </buildGradleAdditions>
</root>
